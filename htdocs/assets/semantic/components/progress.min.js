!function(e,t,n,r){"use strict";void 0!==(t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")())&&t.Math==Math||("undefined"!=typeof self&&self.Math==Math?self:Function("return this")());e.fn.progress=function(t){var r,a=e(this),o=a.selector||"",i=(new Date).getTime(),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return a.each(function(){var a,d=e.isPlainObject(t)?e.extend(!0,{},e.fn.progress.settings,t):e.extend({},e.fn.progress.settings),v=d.className,g=d.metadata,p=d.namespace,f=d.selector,m=d.error,b="."+p,h="module-"+p,x=e(this),w=e(this).find(f.bar),y=e(this).find(f.progress),V=e(this).find(f.label),C=this,E=x.data(h),P=!1;a={initialize:function(){a.debug("Initializing progress bar",d),a.set.duration(),a.set.transitionEvent(),a.read.metadata(),a.read.settings(),a.instantiate()},instantiate:function(){a.verbose("Storing instance of progress",a),E=a,x.data(h,a)},destroy:function(){a.verbose("Destroying previous progress for",x),clearInterval(E.interval),a.remove.state(),x.removeData(h),E=void 0},reset:function(){a.remove.nextValue(),a.update.progress(0)},complete:function(){(void 0===a.percent||a.percent<100)&&(a.remove.progressPoll(),a.set.percent(100))},read:{metadata:function(){var e={percent:x.data(g.percent),total:x.data(g.total),value:x.data(g.value)};e.percent&&(a.debug("Current percent value set from metadata",e.percent),a.set.percent(e.percent)),e.total&&(a.debug("Total value set from metadata",e.total),a.set.total(e.total)),e.value&&(a.debug("Current value set from metadata",e.value),a.set.value(e.value),a.set.progress(e.value))},settings:function(){!1!==d.total&&(a.debug("Current total set in settings",d.total),a.set.total(d.total)),!1!==d.value&&(a.debug("Current value set in settings",d.value),a.set.value(d.value),a.set.progress(a.value)),!1!==d.percent&&(a.debug("Current percent set in settings",d.percent),a.set.percent(d.percent))}},bind:{transitionEnd:function(e){var t=a.get.transitionEnd();w.one(t+b,function(t){clearTimeout(a.failSafeTimer),e.call(this,t)}),a.failSafeTimer=setTimeout(function(){w.triggerHandler(t)},d.duration+d.failSafeDelay),a.verbose("Adding fail safe timer",a.timer)}},increment:function(e){var t,n;a.has.total()?n=(t=a.get.value())+(e=e||1):(n=(t=a.get.percent())+(e=e||a.get.randomValue()),100,a.debug("Incrementing percentage by",t,n)),n=a.get.normalizedValue(n),a.set.progress(n)},decrement:function(e){var t,n;a.get.total()?(n=(t=a.get.value())-(e=e||1),a.debug("Decrementing value by",e,t)):(n=(t=a.get.percent())-(e=e||a.get.randomValue()),a.debug("Decrementing percentage by",e,t)),n=a.get.normalizedValue(n),a.set.progress(n)},has:{progressPoll:function(){return a.progressPoll},total:function(){return!1!==a.get.total()}},get:{text:function(e){var t=a.value||0,n=a.total||0,r=P?a.get.displayPercent():a.percent||0,o=a.total>0?n-t:100-r;return e=(e=e||"").replace("{value}",t).replace("{total}",n).replace("{left}",o).replace("{percent}",r),a.verbose("Adding variables to progress bar text",e),e},normalizedValue:function(e){if(e<0)return a.debug("Value cannot decrement below 0"),0;if(a.has.total()){if(e>a.total)return a.debug("Value cannot increment above total",a.total),a.total}else if(e>100)return a.debug("Value cannot increment above 100 percent"),100;return e},updateInterval:function(){return"auto"==d.updateInterval?d.duration:d.updateInterval},randomValue:function(){return a.debug("Generating random increment percentage"),Math.floor(Math.random()*d.random.max+d.random.min)},numericValue:function(e){return"string"==typeof e?""!==e.replace(/[^\d.]/g,"")&&+e.replace(/[^\d.]/g,""):e},transitionEnd:function(){var e,t=n.createElement("element"),r={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in r)if(void 0!==t.style[e])return r[e]},displayPercent:function(){var e=w.width(),t=x.width(),n=e>parseInt(w.css("min-width"),10)?e/t*100:a.percent;return d.precision>0?Math.round(n*(10*d.precision))/(10*d.precision):Math.round(n)},percent:function(){return a.percent||0},value:function(){return a.nextValue||a.value||0},total:function(){return a.total||!1}},create:{progressPoll:function(){a.progressPoll=setTimeout(function(){a.update.toNextValue(),a.remove.progressPoll()},a.get.updateInterval())}},is:{complete:function(){return a.is.success()||a.is.warning()||a.is.error()},success:function(){return x.hasClass(v.success)},warning:function(){return x.hasClass(v.warning)},error:function(){return x.hasClass(v.error)},active:function(){return x.hasClass(v.active)},visible:function(){return x.is(":visible")}},remove:{progressPoll:function(){a.verbose("Removing progress poll timer"),a.progressPoll&&(clearTimeout(a.progressPoll),delete a.progressPoll)},nextValue:function(){a.verbose("Removing progress value stored for next update"),delete a.nextValue},state:function(){a.verbose("Removing stored state"),delete a.total,delete a.percent,delete a.value},active:function(){a.verbose("Removing active state"),x.removeClass(v.active)},success:function(){a.verbose("Removing success state"),x.removeClass(v.success)},warning:function(){a.verbose("Removing warning state"),x.removeClass(v.warning)},error:function(){a.verbose("Removing error state"),x.removeClass(v.error)}},set:{barWidth:function(e){e>100?a.error(m.tooHigh,e):e<0?a.error(m.tooLow,e):(w.css("width",e+"%"),x.attr("data-percent",parseInt(e,10)))},duration:function(e){e="number"==typeof(e=e||d.duration)?e+"ms":e,a.verbose("Setting progress bar transition duration",e),w.css({"transition-duration":e})},percent:function(e){e="string"==typeof e?+e.replace("%",""):e,e=d.precision>0?Math.round(e*(10*d.precision))/(10*d.precision):Math.round(e),a.percent=e,a.has.total()||(a.value=d.precision>0?Math.round(e/100*a.total*(10*d.precision))/(10*d.precision):Math.round(e/100*a.total*10)/10,d.limitValues&&(a.value=a.value>100?100:a.value<0?0:a.value)),a.set.barWidth(e),a.set.labelInterval(),a.set.labels(),d.onChange.call(C,e,a.value,a.total)},labelInterval:function(){clearInterval(a.interval),a.bind.transitionEnd(function(){a.verbose("Bar finished animating, removing continuous label updates"),clearInterval(a.interval),P=!1,a.set.labels()}),P=!0,a.interval=setInterval(function(){e.contains(n.documentElement,C)||(clearInterval(a.interval),P=!1),a.set.labels()},d.framerate)},labels:function(){a.verbose("Setting both bar progress and outer label text"),a.set.barLabel(),a.set.state()},label:function(e){(e=e||"")&&(e=a.get.text(e),a.verbose("Setting label to text",e),V.text(e))},state:function(e){100===(e=void 0!==e?e:a.percent)?d.autoSuccess&&!(a.is.warning()||a.is.error()||a.is.success())?(a.set.success(),a.debug("Automatically triggering success at 100%")):(a.verbose("Reached 100% removing active state"),a.remove.active(),a.remove.progressPoll()):e>0?(a.verbose("Adjusting active progress bar label",e),a.set.active()):(a.remove.active(),a.set.label(d.text.active))},barLabel:function(e){void 0!==e?y.text(a.get.text(e)):"ratio"==d.label&&a.total?(a.verbose("Adding ratio to bar label"),y.text(a.get.text(d.text.ratio))):"percent"==d.label&&(a.verbose("Adding percentage to bar label"),y.text(a.get.text(d.text.percent)))},active:function(e){e=e||d.text.active,a.debug("Setting active state"),d.showActivity&&!a.is.active()&&x.addClass(v.active),a.remove.warning(),a.remove.error(),a.remove.success(),(e=d.onLabelUpdate("active",e,a.value,a.total))&&a.set.label(e),a.bind.transitionEnd(function(){d.onActive.call(C,a.value,a.total)})},success:function(e){e=e||d.text.success||d.text.active,a.debug("Setting success state"),x.addClass(v.success),a.remove.active(),a.remove.warning(),a.remove.error(),a.complete(),d.text.success?(e=d.onLabelUpdate("success",e,a.value,a.total),a.set.label(e)):(e=d.onLabelUpdate("active",e,a.value,a.total),a.set.label(e)),a.bind.transitionEnd(function(){d.onSuccess.call(C,a.total)})},warning:function(e){e=e||d.text.warning,a.debug("Setting warning state"),x.addClass(v.warning),a.remove.active(),a.remove.success(),a.remove.error(),a.complete(),(e=d.onLabelUpdate("warning",e,a.value,a.total))&&a.set.label(e),a.bind.transitionEnd(function(){d.onWarning.call(C,a.value,a.total)})},error:function(e){e=e||d.text.error,a.debug("Setting error state"),x.addClass(v.error),a.remove.active(),a.remove.success(),a.remove.warning(),a.complete(),(e=d.onLabelUpdate("error",e,a.value,a.total))&&a.set.label(e),a.bind.transitionEnd(function(){d.onError.call(C,a.value,a.total)})},transitionEvent:function(){a.get.transitionEnd()},total:function(e){a.total=e},value:function(e){a.value=e},progress:function(e){a.has.progressPoll()?(a.debug("Updated within interval, setting next update to use new value",e),a.set.nextValue(e)):(a.debug("First update in progress update interval, immediately updating",e),a.update.progress(e),a.create.progressPoll())},nextValue:function(e){a.nextValue=e}},update:{toNextValue:function(){var e=a.nextValue;e&&(a.debug("Update interval complete using last updated value",e),a.update.progress(e),a.remove.nextValue())},progress:function(e){var t;!1===(e=a.get.numericValue(e))&&a.error(m.nonNumeric,e),e=a.get.normalizedValue(e),a.has.total()?(a.set.value(e),t=e/a.total*100,a.debug("Calculating percent complete from total",t),a.set.percent(t)):(t=e,a.debug("Setting value to exact percentage value",t),a.set.percent(t))}},setting:function(t,n){if(a.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,d,t);else{if(void 0===n)return d[t];e.isPlainObject(d[t])?e.extend(!0,d[t],n):d[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,a,t);else{if(void 0===n)return a[t];a[t]=n}},debug:function(){!d.silent&&d.debug&&(d.performance?a.performance.log(arguments):(a.debug=Function.prototype.bind.call(console.info,console,d.name+":"),a.debug.apply(console,arguments)))},verbose:function(){!d.silent&&d.verbose&&d.debug&&(d.performance?a.performance.log(arguments):(a.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),a.verbose.apply(console,arguments)))},error:function(){d.silent||(a.error=Function.prototype.bind.call(console.error,console,d.name+":"),a.error.apply(console,arguments))},performance:{log:function(e){var t,n;d.performance&&(n=(t=(new Date).getTime())-(i||t),i=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:C,"Execution Time":n})),clearTimeout(a.performance.timer),a.performance.timer=setTimeout(a.performance.display,500)},display:function(){var t=d.name+":",n=0;i=!1,clearTimeout(a.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",o&&(t+=" '"+o+"'"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,o){var i,s,l,c=E;return n=n||u,o=C||o,"string"==typeof t&&void 0!==c&&(t=t.split(/[\. ]/),i=t.length-1,e.each(t,function(n,r){var o=n!=i?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[o])&&n!=i)c=c[o];else{if(void 0!==c[o])return s=c[o],!1;if(!e.isPlainObject(c[r])||n==i)return void 0!==c[r]?(s=c[r],!1):(a.error(m.method,t),!1);c=c[r]}})),e.isFunction(s)?l=s.apply(o,n):void 0!==s&&(l=s),e.isArray(r)?r.push(l):void 0!==r?r=[r,l]:void 0!==l&&(r=l),s}},c?(void 0===E&&a.initialize(),a.invoke(l)):(void 0!==E&&E.invoke("destroy"),a.initialize())}),void 0!==r?r:this},e.fn.progress.settings={name:"Progress",namespace:"progress",silent:!1,debug:!1,verbose:!1,performance:!0,random:{min:2,max:5},duration:300,updateInterval:"auto",autoSuccess:!0,showActivity:!0,limitValues:!0,label:"percent",precision:0,framerate:1e3/30,percent:!1,total:!1,value:!1,failSafeDelay:100,onLabelUpdate:function(e,t,n,r){return t},onChange:function(e,t,n){},onSuccess:function(e){},onActive:function(e,t){},onError:function(e,t){},onWarning:function(e,t){},error:{method:"The method you called is not defined.",nonNumeric:"Progress value is non numeric",tooHigh:"Value specified is above 100%",tooLow:"Value specified is below 0%"},regExp:{variable:/\{\$*[A-z0-9]+\}/g},metadata:{percent:"percent",total:"total",value:"value"},selector:{bar:"> .bar",label:"> .label",progress:".bar > .progress"},text:{active:!1,error:!1,success:!1,warning:!1,percent:"{percent}%",ratio:"{value} of {total}"},className:{active:"active",error:"error",success:"success",warning:"warning"}}}(jQuery,window,document);